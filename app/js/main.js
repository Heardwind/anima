"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function canvasApp(){var e,t,a,n,l,i,s,r,o,c,u,h,d,f,v,p,m,g,y,k,x,M,b,P,C,I,_,L,S,j,w,V,Y,X,A,E,T,Z,q,z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:180,D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[70,255,140],O=.7,N=document.getElementById("canvasOne"),B=N.getContext("2d");function R(){n=(a=1)-1,l=8,o=D[0],c=D[1],u=D[2],_="rgba("+o+","+c+","+u+",",r=1,e=N.width,t=N.height,f=e/2,v=t/2,p=(h=320)-2,i={},s={},b=.1,P=.1,C=.1,I=-0,x=2.5,0,y=0,k=-3-z,M=-750,g=2*Math.PI/5e3,m=0,setInterval(W,10/24)}function W(){if(++n>=a)for(n=0,X=0;X<l;X++){A=2*Math.random()*Math.PI,E=Math.acos(2*Math.random()-1),T=z*Math.sin(E)*Math.cos(A),Z=z*Math.sin(E)*Math.sin(A),q=z*Math.cos(E);var s=F(T,y+Z,k+q,.002*T,.002*Z,.002*q);s.attack=50,s.hold=50,s.decay=100,s.initValue=0,s.holdValue=r,s.lastValue=0,s.stuckTime=90+20*Math.random(),s.accelX=0,s.accelY=I,s.accelZ=0}for(m=(m+g)%(2*Math.PI),S=Math.sin(m),j=Math.cos(m),B.fillStyle="#000000",B.fillRect(0,0,e,t),s=i.first;null!=s;)L=s.next,s.age++,s.age>s.stuckTime&&(s.velX+=s.accelX+b*(2*Math.random()-1),s.velY+=s.accelY+P*(2*Math.random()-1),s.velZ+=s.accelZ+C*(2*Math.random()-1),s.x+=s.velX,s.y+=s.velY,s.z+=s.velZ),w=j*s.x+S*(s.z-k),V=-S*s.x+j*(s.z-k)+k,d=O*h/(h-V),s.projX=w*d+f,s.projY=s.y*d+v,s.age<s.attack+s.hold+s.decay?s.age<s.attack?s.alpha=(s.holdValue-s.initValue)/s.attack*s.age+s.initValue:s.age<s.attack+s.hold?s.alpha=s.holdValue:s.age<s.attack+s.hold+s.decay&&(s.alpha=(s.lastValue-s.holdValue)/s.decay*(s.age-s.attack-s.hold)+s.holdValue):s.dead=!0,s.projX>e||s.projX<0||s.projY<0||s.projY>t||V>p||s.dead?G(s):(Y=(Y=1-V/M)>1?1:Y<0?0:Y,B.fillStyle=_+Y*s.alpha+")",B.beginPath(),B.arc(s.projX,s.projY,d*x,0,2*Math.PI,!1),B.fill(),B.closePath()),s=L}function F(e,t,a,n,l,r){var o;return null!=s.first?null!=(o=s.first).next?(s.first=o.next,o.next.prev=null):s.first=null:o={},null==i.first?(i.first=o,o.prev=null,o.next=null):(o.next=i.first,i.first.prev=o,i.first=o,o.prev=null),o.x=e,o.y=t,o.z=a,o.velX=n,o.velY=l,o.velZ=r,o.age=0,o.dead=!1,Math.random()<.5?o.right=!0:o.right=!1,o}function G(e){i.first==e?null!=e.next?(e.next.prev=null,i.first=e.next):i.first=null:null==e.next?e.prev.next=null:(e.prev.next=e.next,e.next.prev=e.prev),null==s.first?(s.first=e,e.prev=null,e.next=null):(e.next=s.first,s.first.prev=e,s.first=e,e.prev=null)}return R(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[o,c,u];_="rgba("+e[0]+","+e[1]+","+e[2]+","}}function getPoints(){var e=document.querySelector(".container"),t=document.createElement("canvas"),a=t.getContext("2d");a.beginPath(),a.strokeStyle="#ffffff",a.lineWidth=1,a.setLineDash([5,15]),a.moveTo(30,50),a.lineTo(550,300),a.stroke(),console.log(e),e.appendChild(t)}var Anima=function(){function e(t){var a=this;_classCallCheck(this,e),_defineProperty(this,"handleScroll",(function(e){e.preventDefault();var t=Date.now(),n=a.step;t-a.lastAnimation<a.delay||(e.deltaY<0||(a.step=a.step===a.steps?a.steps:++a.step),n!=a.step&&a.upd(),a.lastAnimation=t)})),this.element=document.querySelector(t),this.navigationItems=this.element.querySelectorAll(".navigation li"),this.steps=4,this.step=1,this.delay=2e3,this.lastAnimation=0,this.setup(),this.changeColor=canvasApp(160,[1,136,245])}return _createClass(e,[{key:"setup",value:function(){document.addEventListener("wheel",this.handleScroll,{passive:!1}),document.addEventListener("touchmove",this.handleScroll,{passive:!1}),document.addEventListener("touchstart",this.handleScroll,{passive:!1}),document.addEventListener("touchend",this.handleScroll,{passive:!1})}},{key:"delayI",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"toggleClass",value:function(e){var t,a=this.element.querySelector(".cloudguard .content"),n=!1;setInterval((function(){t=n?"rotate(60deg)":"rotate(-60deg)",a.style.transform=t,n=!n}),9e4)}},{key:"setNavItem",value:function(e){this.navigationItems.length&&(this.navigationItems[e-1].classList.remove("active"),this.navigationItems[e].classList.add("active"))}},{key:"upd",value:function(){var e=this;switch(this.step){case 1:break;case 2:this.element.classList.add("frame_1"),this.changeColor([70,240,157]),setTimeout((function(){e.element.classList.add("frame_2")}),1e3);break;case 3:this.toggleClass("rotate_reverse"),this.element.classList.add("frame_3");break;case 4:this.element.classList.add("frame_4")}this.setNavItem(this.step-1)}}]),e}();function init(){new Anima(".anima")}document.addEventListener("DOMContentLoaded",init);